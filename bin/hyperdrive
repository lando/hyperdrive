#!/usr/bin/env node

const argv = require('./../utils/argv');

// Check for --debug and internally set DEBUG=* if its set
// @TODO: we should make debug a string flag so it can work like setting DEBUG=something
// @TODO: should we handle --debug on our own or use something lightweight like minimist?
// @TODO: or maybe add this as a util?
// @TODO: we should give preference to process.env.DEBUG if its set.

if (argv.hasOption('--debug')) {
  require('debug').enable(argv.getOption('--debug', {defaultValue: '*'}));
}

require('@oclif/command')
.run()
.then(require('@oclif/command/flush'))
// eslint-disable-next-line node/no-unpublished-require
.catch(require('@oclif/errors/handle'));
